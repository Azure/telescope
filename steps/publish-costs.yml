parameters:
- name: cloud
  type: string
- name: credential_type
  type: string

steps:
- ${{ if eq(variables['ALLOCATION_K8S_COST_FILE_PATH'], '') }}:
  - template: /steps/cloud/azure/upload-storage-account.yml
    parameters:
      storage_account_name: "akstelescopecosts" # $(AZURE_TELESCOPE_STORAGE_ACCOUNT_NAME) #TODO: define and update it
      source_file_name: $(ALLOCATION_K8S_COST_FILE_PATH)
      destination_file_name:  ${{ replace(replace(variables['ALLOCATION_K8S_COST_FILE_PATH'], '/', ''), '\\', '') }}
      subfolder: $(SCENARIO_NAME)/k8s-cost-analysis/allocation/$(Build.SourceBranchName)
      container_name: $(SCENARIO_TYPE)
      credential_type: ${{ parameters.credential_type }}
      cloud: ${{ parameters.cloud }}
      upload_type: "Cost Results - Allocation"

- ${{ if eq(variables['ASSETS_K8S_COST_FILE_PATH'], '') }}:
  - template: /steps/cloud/azure/upload-storage-account.yml
    parameters:
      storage_account_name: "akstelescopecosts" # $(AZURE_TELESCOPE_STORAGE_ACCOUNT_NAME) #TODO: define and update it
      source_file_name: $(ASSETS_K8S_COST_FILE_PATH)
      destination_file_name: ${{ replace(replace(variables['ASSETS_K8S_COST_FILE_PATH'], '/', ''), '\\', '') }}
      subfolder: $(SCENARIO_NAME)/k8s-cost-analysis/assets/$(Build.SourceBranchName)
      container_name: $(SCENARIO_TYPE)
      credential_type: ${{ parameters.credential_type }}
      cloud: ${{ parameters.cloud }}
      upload_type: "Cost Results - Assets"