parameters:
- name: region
  type: string
- name: credential_type
  type: string

steps:
- bash: |
    set -eu
    echo "login to AWS in $REGION"

    aws configure set aws_access_key_id "$AWS_ACCESS_KEY"
    aws configure set aws_secret_access_key "$AWS_SECRET_KEY"
    aws configure set default.region "$REGION"
    aws configure list
  displayName: "AWS Login"
  name: aws_login
  env:
    AWS_ACCESS_KEY: $(AWS_ACCESS_KEY_ID)
    AWS_SECRET_KEY: $(AWS_SECRET_ACCESS_KEY)
    REGION: ${{ parameters.region }}
