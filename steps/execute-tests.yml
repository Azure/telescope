parameters:
- name: cloud
  type: string
- name: topology
  type: string
- name: engine
  type: string
- name: engine_input
  type: object
  default: {}
- name: regions
  type: object
  default: {}

steps:
- template: /steps/record-start-time.yml
  parameters:
    variable_name: 'EXECUTE_STEP_START_EPOCH'
    display_name: 'Record test execution start time'
- template: /steps/topology/${{ parameters.topology }}/execute-${{ parameters.engine }}.yml@self
  parameters:
    cloud: ${{ parameters.cloud }}
    engine_input: ${{ parameters.engine_input }}
    regions: ${{ parameters.regions }}
- template: /steps/calculate-duration.yml
  parameters:
    start_variable_name: 'EXECUTE_STEP_START_EPOCH'
    duration_variable_name: 'EXECUTE_STEP_DURATION_MINUTES'
    display_name: 'Calculate step execution duration'