parameters:
  cluster_cli_context:
    type: string
  cluster_srv_context:
    type: string

steps:
  - script: set -eo pipefail
      PYTHONPATH=$PYTHONPATH:$(pwd) python3 $PYTHON_SCRIPT_FILE validate \
      --cluster_cli_context "$CLUSTER_CLI_CONTEXT" \
      --cluster_srv_context "$CLUSTER_SRV_CONTEXT"
    displayName: "Validate iperf3"
    workingDirectory: modules/python
    env:
      PYTHON_SCRIPT_FILE: $(Pipeline.Workspace)/s/modules/python/iperf3/iperf3_pod.py
      CLUSTER_CLI_CONTEXT: ${{ parameters.cluster_cli_context }}
      CLUSTER_SRV_CONTEXT: ${{ parameters.cluster_srv_context }}
