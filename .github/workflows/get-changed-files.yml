name: Changed files

on:
  push:
    branches:
      - Optimize-GH-CI-Workflow

jobs:
  setup-matrix:
    runs-on: ubuntu-latest
    name: Get changed files
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - name: List all changed files
      run: |
        set -eux
        file_changes=$(git diff --name-only -r origin/main HEAD | grep -Ev '\.md$|\.github/' | xargs)
        for file in $file_changes; do
          echo "Changed file: $file"
        done
        