parameters:
  - name: cloud
    type: string
  - name: regions
    type: object
  - name: engine
    type: string
  - name: engine_input
    type: object
  - name: topology
    type: string
  - name: max_parallel
    type: number
  - name: timeout_in_minutes
    type: number
  - name: credential_type
    type: string
  - name: ssh_key_enabled
    type: boolean
  - name: base_run_id
    type: string
  - name: matrix
    type: object
    default:
      #pps=5_pods=35_nodes=5:
      #  node_count: 300
      #  pods_per_step: 50
      #  test_timeout: "2m"
      #  test_type: Gradual_DynamicRes_PPS=5_Pods=35_Nodes=5
      #  cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      pps=35_pods=70_nodes=10:
         node_count: 1200
         pods_per_step: 50     
         test_timeout: "2m"
         test_type: Gradual_DynamicRes_PPS=35_Pods=70_Nodes=10
         cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      #pps=50_pods=350_nodes=50:
      #   node_count: 50
      #   pods_per_step: 50
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=50_Pods=350_Nodes=50
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=25_pods=1400_nodes=200:
      #   node_count: 200
      #   pods_per_step: 25
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=25_Pods=1400_Nodes=200
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=50_pods=1400_nodes=200:
      #   node_count: 200
      #   pods_per_step: 50
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=50_Pods=1400_Nodes=200
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=25_pods=2800_nodes=400:
      #   node_count: 400
      #   pods_per_step: 25
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=25_Pods=2800_Nodes=400
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=50_pods=2800_nodes=400:
      #   node_count: 400
      #   pods_per_step: 50
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=50_Pods=2800_Nodes=400
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=25_pods=4200_nodes=600:
      #   node_count: 600
      #   pods_per_step: 25
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=25_Pods=4200_Nodes=600
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=50_pods=4200_nodes=600:
      #   node_count: 600
      #   pods_per_step: 50
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=50_Pods=4200_Nodes=600
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=25_pods=5600_nodes=800:
      #   node_count: 800
      #   pods_per_step: 25
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=25_Pods=5600_Nodes=800
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=50_pods=5600_nodes=800:
      #   node_count: 800
      #   pods_per_step: 50
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=50_Pods=5600_Nodes=800
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=25_pods=7000_nodes=1000:
      #   node_count: 1000
      #   pods_per_step: 25
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=25_Pods=7000_Nodes=1000
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml
      # pps=50_pods=7000_nodes=1000:
      #   node_count: 1000
      #   pods_per_step: 50
      #   test_timeout: "2m"
      #   test_type: Gradual_DynamicRes_PPS=50_Pods=7000_Nodes=1000
      #   cl2_config_file: swiftv2_deployment_dynamicres_scale_config.yaml

jobs:
  - template: /jobs/competitive-test.yml
    parameters:
      cloud: ${{ parameters.cloud }}
      regions: ${{ parameters.regions }}
      engine: ${{ parameters.engine }}
      engine_input: ${{ parameters.engine_input }}
      topology: ${{ parameters.topology }}
      matrix: ${{ parameters.matrix }}
      max_parallel: ${{ parameters.max_parallel }}
      timeout_in_minutes: ${{ parameters.timeout_in_minutes }}
      credential_type: ${{ parameters.credential_type }}
      ssh_key_enabled: ${{ parameters.ssh_key_enabled }}
      base_run_id: ${{ parameters.base_run_id }}
