trigger: none

schedules:
  - cron: "0 11 * * 3"
    displayName: "Once a week on Wednesday at 11:00 AM"
    branches:
      include:
        - main
    always: true

variables:
  SCENARIO_TYPE: perf-eval
  SCENARIO_NAME: cluster-automatic

stages:
  - stage: azure_australiaeast
    dependsOn: []
    jobs:
      - template: /jobs/competitive-test.yml # must keep as is
        parameters:
          cloud: azure
          regions:
            - australiaeast
          topology: cluster-automatic
          engine: aks-store-demo
          engine_input:
            wait_duration_seconds: 1800
          max_parallel: 1 # required
          credential_type: service_connection # required
          ssh_key_enabled: false
          timeout_in_minutes: 120
  - stage: aws_euwest2
    dependsOn: []
    jobs:
      - template: /jobs/competitive-test.yml # must keep as is
        parameters:
          cloud: aws
          regions:
            - eu-west-2
          topology: cluster-automatic
          engine: aks-store-demo
          engine_input:
            wait_duration_seconds: 1800
          max_parallel: 1 # required
          credential_type: service_connection # required
          ssh_key_enabled: false
          timeout_in_minutes: 120
