trigger: none

variables:
  SCENARIO_TYPE: perf-eval
  SCENARIO_NAME: netpol-scale
  OWNER: aks

stages:
- stage: azure_eastus2
  dependsOn: []
  jobs:
  - template: /jobs/competitive-test.yml
    parameters:
      cloud: azure
      regions:
      - $(LOCATION)
      engine: clusterloader2
      engine_input:
        image: "ghcr.io/sanamsarath/clusterloader2:vtest5" # TODO: Fix this after perf-tests PR is merged
      topology: netpol-scale
      matrix:
        azure_cilium:
          cl2_config_file: netpol-scale-config.yaml
      max_parallel: 2
      timeout_in_minutes: 720
      credential_type: service_connection
      ssh_key_enabled: false
