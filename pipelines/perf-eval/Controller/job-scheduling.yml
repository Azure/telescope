trigger: none

variables:
  SCENARIO_TYPE: perf-eval
  SCENARIO_NAME: job-schedule
  SCENARIO_VERSION: main

stages:
- stage: azure_eastus2
  dependsOn: []
  jobs:
  - template: /jobs/competitive-test.yml
    parameters:
      cloud: azure
      regions:
      - eastus2
      engine: clusterloader2
      engine_input:
        image: "ghcr.io/azure/clusterloader2:v20241022"
      topology: slo
      matrix:
        default:
          cpu_per_node: 4
          node_count: 1000
          node_per_step: 100
          max_pods: 110
          repeats: 1
          scale_timeout: "30m"
          cilium_enabled: False
          cl2_config_file: config.yaml
          service_test: False
      max_parallel: 1
      timeout_in_minutes: 360
      credential_type: service_connection
      ssh_key_enabled: false

- stage: aws_eastus2
  dependsOn: []
  jobs:
  - template: /jobs/competitive-test.yml
    parameters:
      cloud: aws
      regions:
      - us-east-1
      engine: clusterloader2
      engine_input:
        image: "ghcr.io/azure/clusterloader2:v20241022"
      topology: slo
      matrix:
        default:
          cpu_per_node: 4
          node_count: 1000
          node_per_step: 100
          max_pods: 110
          repeats: 1
          scale_timeout: "30m"
          cilium_enabled: False
          cl2_config_file: config.yaml
          service_test: False
      max_parallel: 1
      timeout_in_minutes: 360
      credential_type: service_connection
      ssh_key_enabled: false
